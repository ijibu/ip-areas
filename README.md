ip-areas
========

以纯真IP库为基础，同步新浪IP地址查询接口数据到本地，以后做离线IP查询用

1.首先去下载最新的纯真IP库。本程序使用的是纯真2013-8-25日的库，IP数据记录：445348条，数据库大小：9M。由于IP库比较大，就不包含在git库中了。需要的可以联系鄙人。(@ijibu)
2.下载下来的IP库为.dat格式，为了程序上实现方便，将其解压为txt文件，格式如下：
    1.24.236.0      1.24.239.255    内蒙古乌兰察布市 联通
    1.24.244.0      1.24.247.255    内蒙古乌海市 联通
3.php处理上面的解压文件，然后把每一行的第一个IP获取出来，保存成一个新的文件(startip.ini)，格式如下：
    61.138.100.101
    61.138.100.102
    61.138.100.130
    61.138.100.131
    61.138.100.134
4.本来在后台用PHP的curl模拟浏览器，伪造代理和IP去循环调用新浪IP查询接口，结果查询几千条后就不返回查询结果了。由于工作急迫，没有花时间去研究curl，遂采用下面的方式来实现。采用JS去循环调用新浪IP查询接口，然后再把查询结果的数据提交到后台入库。
    处理startip.ini(方法其实就是批量替换)，处理成js的数组形式，这样好在JS中进行循环，保存在statip.js,内容如下：
    var ips = ['61.138.100.131', '61.138.100.134'];
5.最终在前段引入startip.js文件，然后即可。
6.为了提高效率，可以把startip.js分成几个文件，用不同的IP去跑。哈哈
7.请手动创建数据库，然后再导入数据表结构，修改数据库中的配置信息，然后即可使用了。

	有什么疑问，请联系ijibu(微博：@ijibu， email: ijibu.com@gmail.com)